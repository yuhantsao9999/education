<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>class</title>
    <link rel="stylesheet" href="./css/index.css" />
    <!-- <style>
        @import url(//fonts.googleapis.com/earlyaccess/notosanskannada.css);
    </style> -->
</head>

<body class="about">
    <div id="header">
        <div class="full-width container clearfix">
            <div>
                <div class="nav_item_bar">
                    <a href="./index.html"> <img id="logo" src="./img/logo.png" alt="logo"></a>
                    <a class="search" href="">探索</a>
                    <input id="search" style="font-size:20px" onkeyup="search_course_enter()">
                    <button onclick="search_course()" type="submit"></button>
                    <div id="nav" class="col-8">
                        <ul class="clearfix" id="clearfix">
                            <li class="active"><a href="./course_input.html">我要開課</a></li>
                            <li class="boundary"><a href="./profile_student.html">我的課表</a></li>
                            <!-- <li><a href="./sign_in.html">登入</a></li>
                            <li><a href="./profile.html">hi yuhan!</a></li> -->
                            <!-- <li><a href="./sign_up.html"><i class="icon-search"></i> 註冊</a></li> -->
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-------大報 ------>
    <div id="content">
        <div class="header">
            <div class="container clearfix">
                <div class="row">
                    <div class="col-12">
                        <h1 class="title" id="title">依據您的時間表學習</h1>
                        <h3 class="subtitle" id="course_content">隨時隨地學習任何主題</h3>
                        <h3 class="subtitle" id="course_teacher">探索數以千計的課程</h3>
                    </div>
                </div>
            </div>
        </div>
        <!------- 內容 ------->
        <div class="container">
            <!-- <div class="class_container" id="class_container"> -->
            <div class="row clearfix">
                <h2> <b class="ContentSubtitle">熱門課程</b> </h2>
                <div class="col-6-hot" style="margin-right: 1%;">
                    <!-- <a href="/course.html?title=" +title> -->
                    <div class="col-6">
                        <!-- <img class="class_picture" src="./img/1.png" alt="photo" /> -->
                        </a>
                    </div>
                    <div class="col-8">
                        <h3 class="title"></h3>
                        <div class="text">
                        </div>
                    </div>
                    <!-- </a> -->
                </div>
                <div class="col-6-hot" style="margin-left: 10px;">
                    <div class="col-6">
                        <!-- <img class="class_picture" src="./img/2.png" alt="photo" /> -->
                    </div>
                    <div class="col-8">
                        <h3 class="title">
                            <!-- The Advanced Web Developer Bootcamp -->
                        </h3>
                        <div class="text">
                            <!-- Learn React 16, Redux, D3, ES2015, Testing, CSS Flexbox, Animations, SVG, AJAX, and more! -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="row clearfix">
                <div class="col-6-hot" style="margin-right: 1%;">

                    <div class="col-6">
                        <!-- <img class="class_picture" src="./img/3.png" alt="photo" /> -->
                    </div>
                    <div class="col-8">
                        <h3 class="title">
                            <!-- 零基礎七天入門Linux -->
                        </h3>
                        <div class="text">
                            <!-- 每天1小時，堅持7天，讓您輕鬆自如的使用Linux  -->
                        </div>
                    </div>
                </div>
                <div class="col-6-hot" style="margin-left: 10px;">
                    <div class="col-6">
                        <!-- <img class="class_picture" src="./img/course5.png" alt="photo" /> -->
                    </div>
                    <div class="col-8">
                        <h3 class="title">
                            <!-- React 前端開發：從入門到進階 -->
                        </h3>
                        <div class="text">
                            <!-- 本堂課程講求實戰性與實作，除了教你在業界才懂的獨門心法，幫你加速建置網站。 -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- </div> -->
            <div class="class_container" id="class_container">
                <h2> <b class="ContentSubtitle">您也可以選擇</b> </h2>
            </div>
        </div>
        <!-- <div id="class_chapter_section">
                <div class="class_chapter_section_container" id="class_chapter_section_container"> -->
        <!-- <div class="row clearfix">
                    <div class="col-2">
                        <div class="one" id="test"z</div>
                    </div>
                    <div id=chapter_section_detail>
                        <div class="col-10">
                            <h3 class="title"></h3>
                            <p>
                            </p>
                            <p>
                            </p>
                        </div>
                    </div>
                </div> -->
        <!-- </div>
            </div> -->

        <div class="summary gray-bg">
            <div class="container">

                <div class="row">
                    <div class="col-3">
                        <i class="icon-squares108"></i>
                        <div class="count">36</div>
                        <h4>人註冊</h4>
                    </div>
                    <div class="col-3">
                        <i class="icon-television53"></i>
                        <div class="count">36%</div>
                        <h4>的人透過此課程找到工作</h4>
                    </div>
                    <div class="col-3">
                        <i class="icon-datastorage5"></i>
                        <div class="count">36</div>
                        <h4>則評論</h4>
                    </div>
                    <div class="col-3">
                        <i class="icon-statistics27"></i>
                        <div class="count">5.0</div>
                        <h4>顆星</h4>
                    </div>
                </div>

            </div>
        </div>

        <div class="clients">
            <div class="container">

                <div class="intro big">
                    <h2 class="title">助您輕鬆入門的課程</h2>
                    <p></p>
                </div>

                <div class="row">
                    <div class="col-2">
                        <img src="./img/go.jpg" alt="logo" />
                    </div>
                    <div class="col-2">
                        <img src="./img/1.png" alt="logo" />
                    </div>
                    <div class="col-2">
                        <img src="./img/2.png" alt="logo" />
                    </div>
                    <div class="col-2">
                        <img src="./img/3.png" alt="logo" />
                    </div>
                    <div class="col-2">
                        <img src="./img/course5.png" alt="logo" />
                    </div>
                    <div class="col-2">
                        <img src="./img/3.png" alt="logo" />
                    </div>
                </div>

            </div>
        </div>

    </div>

    <div id="footer" class="dark">

        <div class="info">
            <div class="container">

                <div class="row">
                    <div class="col-3">
                        <img id="logo" src="./img/logo.png" alt="logo" />
                        <p>讓學習<br>無時無刻無距離</p>
                    </div>
                    <div class="col-3">
                        <h4 class="title">recent posts</h4>
                        <ul class="common-list">
                            <li><a href="#">standard blog post</a></li>
                            <li><a href="#">quotation post</a></li>
                            <li><a href="#">audio post</a></li>

                        </ul>
                    </div>
                    <div class="col-3">
                        <h4 class="title">快速連結</h4>
                        <ul class="common-list">
                            <li><a href="#">關於我們</a></li>
                            <li><a href="#">回到主頁</a></li>
                            <li><a href="./course_input.html">我要開課</a></li>
                        </ul>
                    </div>

                </div>

            </div>
        </div>

        <div class="bottom">
            <div class="container clearfix">

                <div class="copyright">
                    <div class="title">Copyright 2019 by <a href="#">yuhan</a> | All Rights Reserved</div>
                </div>

                <div class="social-media">
                    <ul>
                        <li><a href="#"><i class="icon-facebook"></i></a></li>
                        <li><a href="#"><i class="icon-twitter"></i></a></li>
                        <li><a href="#"><i class="icon-dribbble"></i></a></li>
                        <li><a href="#"><i class="icon-gplus"></i></a></li>
                        <li><a href="#"><i class="icon-behance"></i></a></li>
                    </ul>
                </div>

            </div>
        </div>
    </div>

    <a href="#header" id="go-top"><i class="icon-up-open"></i></a>

</body>
<script>
    var xmlhttp_hot = new XMLHttpRequest();
    xmlhttp_hot.open("GET", "/education/classinfo/hot", true);
    xmlhttp_hot.send(null);
    xmlhttp_hot.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            var obj = JSON.parse(xmlhttp_hot.responseText)
            console.log("hotttttt :  " + JSON.stringify(obj.data[0]))


            for (var i = 0; i < 4; i++) {
                var main_image = obj.data[i].main_image;

                var hotCourse_title = document.createTextNode(obj.data[i].course_title);
                console.log("hotCourse_title:" + JSON.stringify(hotCourse_title))
                var hotClassTitle_a = document.createElement("a");
                hotClassTitle_a.href = "/course.html?title=" + obj.data[i].course_title
                hotClassTitle_a.appendChild(hotCourse_title)



                var hotCourse_intro = document.createTextNode(obj.data[i].course_intro);
                var hotClassIntro_a = document.createElement("a");
                hotClassIntro_a.href = "/course.html?title=" + obj.data[i].course_title;
                hotClassIntro_a.appendChild(hotCourse_intro)


                var hotClassImg = document.createElement("img");
                hotClassImg.className = "class_picture";
                hotClassImg.src = "https://cad-education-project.s3-ap-northeast-1.amazonaws.com/class-video-picture/" + main_image;
                var hotClassImg_a = document.createElement("a");
                hotClassImg_a.href = "/course.html?title=" + obj.data[i].course_title
                hotClassImg_a.appendChild(hotClassImg)




                document.getElementsByClassName("col-6")[i].appendChild(hotClassImg_a);
                document.getElementsByClassName("title")[i + 1].appendChild(hotClassTitle_a);
                document.getElementsByClassName("text")[i].appendChild(hotClassIntro_a);
            }


        }

    }

    //course_list.js
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open("GET", "/education/classinfo/all", true);
    xmlhttp.send(null);
    xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            var obj = JSON.parse(xmlhttp.responseText)
            console.log(obj.data[0])
            for (var i = 4; i < obj.data.length; i++) {
                //替換課程圖片
                var classImg = document.createElement("img");
                var colDiv = document.createElement("div");
                var rowA = document.createElement("a");
                // var titleContent = document.createTextNode(obj.Course_title);
                classImg.className = "class_picture";
                classImg.src = "https://cad-education-project.s3-ap-northeast-1.amazonaws.com/class-video-picture/" + obj.data[i].main_image
                    // classImg.src = "./img/course5.png"
                colDiv.className = "col-3"
                rowA.className = "row clearfix"

                rowA.href = ("/course.html?title=" + obj.data[i].course_title);

                colDiv.appendChild(classImg)
                    // document.getElementById("class_container").appendChild(rowDiv)
                    //替換課程標題

                var titleh3 = document.createElement("h3");

                var star_detail_div = document.createElement("div");
                star_detail_div.className = "star_detail"

                var star_img = document.createElement("img");
                star_img.src = "./img/star2.png"
                star_img.className = "star"

                var average_star_div = document.createElement("div");
                var average_star = document.createTextNode(obj.data[i].average_star);
                average_star_div.className = "average_star"
                average_star_div.appendChild(average_star)


                var course_teacher_div = document.createElement("div");
                course_teacher_div.className = "course_teacher"
                var course_teacher = document.createTextNode(obj.data[i].course_teacher);
                course_teacher_div.appendChild(course_teacher)


                var introP = document.createElement("p");
                var col_8Div = document.createElement("div");
                titleh3.className = "title_another"

                col_8Div.className = "col-8"

                var titleContent = document.createTextNode(obj.data[i].course_title);
                console.log(titleContent)
                var introContent = document.createTextNode(obj.data[i].course_intro);


                titleh3.appendChild(titleContent)

                star_detail_div.appendChild(star_img)
                star_detail_div.appendChild(average_star_div)
                star_detail_div.appendChild(course_teacher_div)

                titleh3.appendChild(star_detail_div)
                introP.appendChild(introContent)
                col_8Div.appendChild(titleh3)
                col_8Div.appendChild(introP)
                rowA.appendChild(colDiv)
                rowA.appendChild(col_8Div)
                document.getElementById("class_container").appendChild(rowA)
            }
        }
    }

    //search
    function search_course_enter() {
        if (event.keyCode == 13)
            search_course();
    }

    // get search course data 
    function search_course() {
        var client_keyword = document.getElementById("search").value;

        // function ucfirst(str) {
        var lowcase_keyword = client_keyword.toLowerCase();
        var keyword_arr = lowcase_keyword.split(' ');
        for (var i = 0; i < keyword_arr.length; i++) {
            var result = keyword_arr[i].substring(0, 1).toUpperCase() + keyword_arr[i].substring(1).toLowerCase();
        }
        // console.log(result)
        window.location.replace("./search.html?keyword=" + result);
    }



    // user_icon
    accessToken = localStorage.getItem("accessToken")
    console.log("accessToken" + accessToken)
    var xml_icon = new XMLHttpRequest();
    xml_icon.open("get", "/profile/getinfo", true);
    xml_icon.setRequestHeader("Authorization", "Bearer" + " " + accessToken);
    xml_icon.send(null);
    xml_icon.onreadystatechange = function() {
        if (xml_icon.readyState == 4) {
            if (xml_icon.responseText == "error") {
                //還沒登入
                var sign_li = document.createElement("li");
                var signContent = document.createTextNode("登入");
                var sign_a = document.createElement("a");
                sign_a.href = "./sign_in.html"
                sign_a.appendChild(signContent)
                sign_li.appendChild(sign_a)
                document.getElementById("clearfix").appendChild(sign_li)
            } else {
                //已登入
                var sign_li = document.createElement("li");
                var signContent = document.createTextNode("Hello!");
                var sign_a = document.createElement("a");
                sign_a.href = "./profile.html?tab=current"
                sign_a.appendChild(signContent)
                sign_li.appendChild(sign_a)
                document.getElementById("clearfix").appendChild(sign_li)
            }
        }
    }
</script>

</html>