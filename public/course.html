<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>class</title>
    <link rel="stylesheet" href="./css/course.css" />
</head>

<body class="about">
    <div id="header">

        <div class="full-width container clearfix">
            <div>
                <div class="nav_item_bar">
                    <a href="./acd.html"> <img id="logo" src="./img/logo.png" alt="logo"></a>
                    <a class="search" href="">探索</a>
                    <input id="search" style="font-size:20px">
                    <button onclick="search_course()" type="submit"></button>

                    <div id="nav" class="col-8">
                        <ul class="clearfix">
                            <li class="active"><a href="#">我要開課</a></li>
                            <li class=""><a href="#">我的課表</a></li>
                            <li class="boundary"><a href="#">登入</a></li>
                            <li><a href="#"><i class="icon-search"></i> 註冊</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ---------大報 -->
    <div id="content">
        <div class="header">
            <div class="container clearfix">

                <div class="row">
                    <div class="col-12">
                        <h1 class="title" id="title"></h1>
                        <h3 class="subtitle" id="course_content"></h3>
                        <h3 class="subtitle" id="course_teacher"></h3>
                        <input class="add_class" type="button" value="加入課表" name="按鈕名稱">
                    </div>
                </div>
            </div>
        </div>
        <!-- ---------內容 ------->
        <div id="class_chapter_section">
            <div class="class_chapter_section_container" id="class_chapter_section_container">
                <!-- <div class="row clearfix">

                    <div class="col-2">
                        <div class="one" id="test"></div>
                    </div>


                    <div id=chapter_section_detail>
                        <div class="col-10">
                            <h3 class="title"></h3>
                            <p>
                            </p>
                            <p>
                            </p>
                        </div>
                    </div>
                </div> -->
            </div>

        </div>

        <div class="summary gray-bg">
            <div class="container">

                <div class="row">
                    <div class="col-3">
                        <i class="icon-squares108"></i>
                        <div class="count">36</div>
                        <h4>人已選課</h4>
                    </div>
                    <div class="col-3">
                        <i class="icon-television53"></i>
                        <div class="count">36%</div>
                        <h4>的人透過此課程找到工作</h4>
                    </div>
                    <div class="col-3">
                        <i class="icon-datastorage5"></i>
                        <div class="count">36</div>
                        <h4>則評論</h4>
                    </div>
                    <div class="col-3">
                        <i class="icon-statistics27"></i>
                        <div class="count">5.0</div>
                        <h4>顆星</h4>
                    </div>
                </div>

            </div>
        </div>

        <div class="clients">
            <div class="container">

                <div class="intro big">
                    <h2 class="title">對這門課感興趣的人也看了</h2>
                    <p></p>
                </div>

                <div class="row">
                    <div class="col-2">
                        <img src="http://lorempixel.com/145/111/" alt="logo" />
                    </div>
                    <div class="col-2">
                        <img src="http://lorempixel.com/145/111/" alt="logo" />
                    </div>
                    <div class="col-2">
                        <img src="http://lorempixel.com/145/111/" alt="logo" />
                    </div>
                    <div class="col-2">
                        <img src="http://lorempixel.com/145/111/" alt="logo" />
                    </div>
                    <div class="col-2">
                        <img src="http://lorempixel.com/145/111/" alt="logo" />
                    </div>
                    <div class="col-2">
                        <img src="http://lorempixel.com/145/111/" alt="logo" />
                    </div>
                </div>

            </div>
        </div>

    </div>

    <div id="footer" class="dark">

        <div class="info">
            <div class="container">

                <div class="row">
                    <div class="col-3">
                        <img id="logo" src="./img/logo.png" alt="massive" />
                        <p>讓學習<br>無時無刻無距離</p>
                    </div>
                    <div class="col-3">
                        <h4 class="title">recent posts</h4>
                        <ul class="common-list">
                            <li><a href="#">standard blog post</a></li>
                            <li><a href="#">quotation post</a></li>
                            <li><a href="#">audio post</a></li>

                        </ul>
                    </div>
                    <div class="col-3">
                        <h4 class="title">快速連結</h4>
                        <ul class="common-list">
                            <li><a href="#">關於我們</a></li>
                            <li><a href="#">回到主頁</a></li>
                            <li><a href="#">我要開課</a></li>
                        </ul>
                    </div>

                </div>

            </div>
        </div>

        <div class="bottom">
            <div class="container clearfix">

                <div class="copyright">
                    <div class="title">Copyright 2019 by <a href="#">yuhan</a> | All Rights Reserved</div>
                </div>

                <div class="social-media">
                    <ul>
                        <li><a href="#"><i class="icon-facebook"></i></a></li>
                        <li><a href="#"><i class="icon-twitter"></i></a></li>
                        <li><a href="#"><i class="icon-dribbble"></i></a></li>
                        <li><a href="#"><i class="icon-gplus"></i></a></li>
                        <li><a href="#"><i class="icon-behance"></i></a></li>
                    </ul>
                </div>

            </div>
        </div>
    </div>

    <a href="#header" id="go-top"><i class="icon-up-open"></i></a>

</body>
<script>
    const urlParams = new URLSearchParams(window.location.search);
    const title = urlParams.get('title');
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open("GET", "/education/classinfo?title=" + title, true);
    xmlhttp.send(null);
    xmlhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            var obj = JSON.parse(xmlhttp.responseText)

            //替換課程名稱
            var titleDiv = document.createElement("div");
            var titleContent = document.createTextNode(obj.data.Course_title);
            titleDiv.appendChild(titleContent);
            document.getElementById("title").appendChild(titleDiv)

            //替換課程內容
            var contentDiv = document.createElement("div");
            var contentContent = document.createTextNode(obj.data.Course_intro);
            contentDiv.appendChild(contentContent);
            document.getElementById("course_content").appendChild(contentDiv)

            //替換課程老師
            var teacherDiv = document.createElement("div");
            var teacherContent = document.createTextNode("授課教師 : " + obj.data.Course_teacher);
            teacherDiv.appendChild(teacherContent);
            document.getElementById("course_teacher").appendChild(teacherDiv)

            //替換章節ID
            var number = obj.data.Course_detail.length
                // console.log(number)
            for (var i = 0; i < obj.data.Course_detail.length; i++) {

                var chapterDiv = document.createElement("div");
                var rowDiv = document.createElement("div");
                var colDiv = document.createElement("div");
                rowDiv.className = "col-2"
                colDiv.className = "one"
                var chapterContent = document.createTextNode(obj.data.Course_detail[i].Chapter_id);
                chapterDiv.className = "row clearfix"
                colDiv.appendChild(chapterContent);
                rowDiv.appendChild(colDiv);
                chapterDiv.appendChild(rowDiv);
                // document.getElementById("class_chapter_section_container").appendChild(chapterDiv)

                //替換章節內容
                var chapter_title_Div = document.createElement("div");
                var chapter_row_Div = document.createElement("h3");
                var chapter_section_detail_div = document.createElement("div");

                chapter_row_Div.className = "col-10"
                chapter_section_detail_div.className = "chapter_section_detail"

                var chapter_title_Content = document.createTextNode(obj.data.Course_detail[i].Chapter_title);
                // console.log(chapter_title_Content)

                chapter_row_Div.appendChild(chapter_title_Content)
                chapter_section_detail_div.appendChild(chapter_row_Div)
                chapterDiv.appendChild(chapter_section_detail_div);
                // document.getElementById("class_chapter_section_container").appendChild(chapterDiv)

                console.log(obj.data.Course_detail[i].Chapter_detail.length)
                for (var k = 0; k < obj.data.Course_detail[i].Chapter_detail.length; k++) {
                    //替換節的內容
                    var section_title_Div = document.createElement("p");
                    var section_title_Content = document.createTextNode(obj.data.Course_detail[i].Chapter_detail[k].Section_title);
                    // console.log(section_title_Content)
                    section_title_Div.appendChild(section_title_Content);
                    chapterDiv.appendChild(section_title_Div);
                    document.getElementById("class_chapter_section_container").appendChild(chapterDiv)

                }

            }

        }



    }
</script>

</html>